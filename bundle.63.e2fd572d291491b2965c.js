(self.webpackChunkcloud_openshift_com=self.webpackChunkcloud_openshift_com||[]).push([[63],{69693:(e,t,a)=>{"use strict";a.d(t,{uF:()=>r,ZP:()=>s});const{insights:o}=a(60306);function n(){return`/beta/${o.appname}`}function r(e){return e.replace(new RegExp(`^${n()}`,"i"),"")}const s=n},38080:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var o=a(69693);function n(e){const t=(0,o.uF)(e).replace(/^\//,"").split("/");switch(t[0]){case"downloads":case"token":return{id:"downloads"};case"quota":return{id:t[1]||"openshift-quota",parentId:"subscriptions",secondaryNav:!0};case"subscriptions":return{id:t[1],parentId:"subscriptions",secondaryNav:!0};case"overview":case"releases":return{id:t[0]};default:return{id:""}}}},57063:(e,t,a)=>{"use strict";a.r(t);var o=a(92950),n=a.n(o),r=a(12181),s=a.n(r),i=(a(334),a(12167)),c=(a(96533),a(57689)),l=a(9047),d=(a(38080),a(69693),a(42282),a(79920),a(99205),a(43363)),u=a(45697),b=a.n(u),p=a(22292),h=a(46568),f=a(83626);const v=({children:e})=>n().createElement(n().Fragment,null,n().createElement("span",{id:"scrollToTop"}),l.ZP.override&&n().createElement(f.Z,{env:l.ZP.override}),n().createElement(h.Z,null,e||n().createElement(p.Z,null)));v.propTypes={children:b().oneOfType([b().arrayOf(b().node),b().node])},(0,i.connect)((e=>({userProfile:e.userProfile})))(v);const{Api:y,Config:m}=c.I;y.setAuthInterceptor(d.w),m.setRouteBasePath("/assisted-installer"),n().Component,window.insights,s().render(n().createElement("div",{style:{margin:"25px"}},n().createElement("h1",null,"Unsupported environment"),n().createElement("h2",null,"OCM does not support this environment"),n().createElement("p",null,"Please use one of our supported environments."),n().createElement("p",null,"OCM is only being deployed to this environment to ensure navigation keeps working.")),document.getElementById("root"))},79920:(e,t,a)=>{"use strict";a.d(t,{R:()=>s});var o=a(41447),n=a(6176);const r=(e,t)=>({name:t,action:()=>n.Z.selfFeatureReview(e).then((e=>e.data.enabled))}),s=[r("osd-trial",o.vC),r("assisted-installer-sno",o.Vs),r("assisted-installer-ocs",o.D9),r("assisted-installer-cnv",o.nc),r("assisted-installer-merge-lists",o.xf),r("assisted-installer-network-type-selection",o.ZY),r("assisted-installer-platform-integration",o.S9),r("osd-creation-wizard",o.Q3),{name:o.vu,action:()=>Promise.all([n.Z.selfAccessReview({action:"create",resource_type:"BareMetalCluster"}),n.Z.selfFeatureReview("assisted-installer")]).then((([e,t])=>e.data.allowed&&t.data.enabled))}]},42282:(e,t,a)=>{"use strict";a.d(t,{hI:()=>_,nh:()=>g,c3:()=>O});var o=a(27361),n=a.n(o),r=a(99205),s=a(45205),i=a(85935),c=a(97875),l=a(94784),d=a(39317);const u=(e,t)=>0===t.cost?1/0:Math.floor((e.allowed-e.consumed)/t.cost),b=(e,t,a)=>{const o=e,n=t.allowed-t.consumed;a.forEach((e=>{const{availability_zone_type:t,cloud_provider:a,resource_name:r,product:s,billing_model:i}=e,c="rhinfra"===e.byoc?"rhInfra":e.byoc;s!==l.Po.ROSA&&Object.entries(o).forEach((([e,o])=>{i!==e&&"any"!==i||Object.entries(o).forEach((([e,o])=>{s!==e&&s!==l.Po.ANY||Object.entries(o).forEach((([e,o])=>{a!==e&&"any"!==a||Object.entries(o).forEach((([e,a])=>{c!==e&&"any"!==c||Object.entries(a).forEach((([e,s])=>{`${t}Az`===e&&(s[r]=n,s.available+=n,a.totalAvailable+=n),"any"===t&&"totalAvailable"!==e&&(s[r]=n,s.available+=n,a.totalAvailable+=n/2),a.totalAvailable>0&&(o.isAvailable=!0)}))}))}))}))}))}))},p=(e,t,a)=>{const o=e,n=t.allowed-t.consumed;a.forEach((e=>{const{cloud_provider:t,resource_name:a,product:r,billing_model:s}=e,i="rhinfra"===e.byoc?"rhInfra":e.byoc;r!==l.Po.ROSA&&Object.entries(o).forEach((([o,c])=>{s!==o&&"any"!==s||Object.entries(c).forEach((([o,s])=>{r!==o&&r!==l.Po.ANY||Object.entries(s).forEach((([o,r])=>{t!==o&&"any"!==t||Object.entries(r).forEach((([t,o])=>{i!==t&&"any"!==i||(o[a]={available:n,cost:e.cost})}))}))}))}))}))},h=(e,t,a)=>{const o=e;a.forEach((e=>{const a=u(t,e),{availability_zone_type:n,cloud_provider:r,resource_name:s,product:i,billing_model:c="standard"}=e,d="rhinfra"===e.byoc?"rhInfra":e.byoc;Object.entries(o).forEach((([e,t])=>{c!==e&&"any"!==c||Object.entries(t).forEach((([e,t])=>{i!==e&&i!==l.Po.ANY||Object.entries(t).forEach((([e,t])=>{r!==e&&"any"!==r||Object.entries(t).forEach((([e,t])=>{d!==e&&"any"!==d||Object.entries(t).forEach((([e,t])=>{`${n}AZ`!==e&&"any"!==n||(t[s]=a)}))}))}))}))}))}))},f=(e,t,a)=>{const o=e;a.forEach((e=>{const a=u(t,e),{availability_zone_type:n,cloud_provider:r,resource_name:s,product:i,billing_model:c="standard"}=e,d="rhinfra"===e.byoc?"rhInfra":e.byoc;Object.entries(o).forEach((([e,t])=>{c!==e&&"any"!==c||Object.entries(t).forEach((([e,t])=>{i!==e&&i!==l.Po.ANY||Object.entries(t).forEach((([e,t])=>{r!==e&&"any"!==r||Object.entries(t).forEach((([e,t])=>{d!==e&&"any"!==d||Object.entries(t).forEach((([e,t])=>{`${n}AZ`!==e&&"any"!==n||(t[s]=a)}))}))}))}))}))}))},v=(e,t,a)=>{const o=e;a.forEach((e=>{const a=u(t,e);if(0===t.allowed&&e.cost>0)return;const{availability_zone_type:n,cloud_provider:r,resource_name:s,product:i,billing_model:c}=e,d="rhinfra"===e.byoc?"rhInfra":e.byoc;Object.entries(o).forEach((([e,t])=>{c!==e&&"any"!==c||Object.entries(t).forEach((([e,t])=>{i!==e&&i!==l.Po.ANY||Object.entries(t).forEach((([e,t])=>{r!==e&&"any"!==r||Object.entries(t).forEach((([e,o])=>{d!==e&&"any"!==d||Object.entries(o).forEach((([e,r])=>{`${n}Az`===e&&(r[s]=a,r.available+=a,o.totalAvailable+=a),"any"===n&&"totalAvailable"!==e&&(r[s]=a,r.available+=a,o.totalAvailable+=a/2),o.totalAvailable>0&&(t.isAvailable=!0)}))}))}))}))}))}))},y=e=>{const t=(0,d.z)(),a=n()(e.data,"items",[]).map(c.ME);return t.items=a,a.forEach((e=>{const a=n()(e,"related_resources",[]);if(!(a.length<1))switch(a[0].resource_type){case"cluster":b(t.clustersQuota,e,a);break;case"compute.node":p(t.nodesQuota,e,a);break;case"pv.storage":h(t.storageQuota,e,a);break;case"network.loadbalancer":f(t.loadBalancerQuota,e,a);break;case"add-on":v(t.addOnsQuota,e,a)}})),t},m=e=>i.BJ.getOrganizationQuota(e).then(y),E=(e,t)=>{const a={quota:void 0,organization:void 0!==t?t.details:t},o=[m(e).then((e=>{a.quota=e}))];return void 0===t&&o.push(i.BJ.getOrganization(e).then((e=>{a.organization=e.data}))),Promise.all(o).then((()=>a))},g=()=>{var e,t;const{userProfile:a}=r.h.getState(),o=null==a||null===(e=a.organization)||void 0===e||null===(t=e.details)||void 0===t?void 0:t.id;return e=>e({payload:void 0!==o?E(o,null==a?void 0:a.organization):i.BJ.getCurrentAccount().then((e=>{const t=n()(e.data,"organization.id");return void 0!==t?E(t):Promise.reject(Error("No organization"))})),type:s.AQ.e_})};function O(){return e=>e({type:s.AQ.Zu,payload:i.FR.selfTermsReview()})}const _={userInfoResponse:e=>({payload:e,type:s.AQ.LX}),getOrganizationAndQuota:g,processClusterQuota:b,processNodeQuota:p,processStorageQuota:h,processLoadBalancerQuota:f,processAddOnQuota:v,processQuota:y,selfTermsReview:O}}}]);
//# sourceMappingURL=bundle.63.e2fd572d291491b2965c.js.map